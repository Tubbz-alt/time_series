#! /bin/sh
# -------------------------------------------------------------
# file: configure.in
# -------------------------------------------------------------
# -------------------------------------------------------------
# Battelle Memorial Institute
# Pacific Northwest Laboratory
# -------------------------------------------------------------
# -------------------------------------------------------------
# Created March 25, 2003 by William A. Perkins
# Last Change: Fri Feb  6 09:30:34 2004 by William A. Perkins <perk@leechong.pnl.gov>
# -------------------------------------------------------------

# -------------------------------------------------------------
# Initialization
# -------------------------------------------------------------
AC_INIT(julian.f90)
AM_INIT_AUTOMAKE(libts,0.1)

# -------------------------------------------------------------
# check some command line options
# -------------------------------------------------------------
AC_ARG_WITH(f90,
    [  --with-f90=cmd              specify the Fortran 90 compiler],
    F90="$withval")

dooptimize=""
AC_ARG_ENABLE(optimize,
  [  --enable-optimize            turn on optimization],
    dooptimize=true,
    dooptimize="")

if test -n "$dooptimize" ; then
    dodebug=""
else
    dodebug=true
fi
AC_ARG_ENABLE(debug,
  [  --enable-debug               turn on debugging (use with --enable-optimize)],
    dodebug=true)

AC_ARG_ENABLE(profile,
  [  --enable-profile             turn on profiling],
    doprofile=true,
    doprofile="")

# -------------------------------------------------------------
# Checks for Programs we need
# -------------------------------------------------------------
AC_PROG_F90()
AC_PROG_RANLIB
AC_PROG_INSTALL
AC_PROG_LN_S

AC_LANG_FORTRAN77

# -------------------------------------------------------------
# set appropriate flags for specified compiler
# -------------------------------------------------------------

FFLAGS="$FFLAGS $F90FLAGS"
if test -n "$dooptimize"; then
    FFLAGS="$FFLAGS $F90OPTIMIZE"
fi
if test -n "$dodebug"; then
    FFLAGS="$FFLAGS $F90DEBUG"
fi
if test -n "$doprofile"; then
    FFLAGS="$FFLAGS $F90PROFILE"
fi

LDFLAGS="$LDFLAGS $F90LDFLAGS"
LIBS="$LIBS $F90LIBS"

dnl AC_PROG_F77_WORKS


AC_OUTPUT(Makefile)
